# コンセプト

- [コンセプト](#コンセプト)
  - [概要](#概要)
  - [移植性](#移植性)

## 概要

Daicker LanguageはCI/CDパイプラインとInfrastructure as Codeの両方を記述するために設計された汎用デプロイメント言語である。

| 特徴                     | 説明                                                                                                                                                                                                                      |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 移植性                   | デプロイプロセスはコンテナで実行することができ、ローカルやCI/CDツール上で同じように処理を実行できる。                                                                                                                     |
| 関数型                   | データと処理を明確に分離するようコードが設計され、データを分離して管理する。これにより運用上のデータを変更したり、処理を変更した際に状況を理解しやすくなる。                                                              |
| 静的型付けと篩型         | 静的型付けにより早い段階で型チェックを実施し手早くエラーを修正することができる。さらに篩型により正規表現や数値の大小などを述語で表現し型チェックできる。                                                                  |
| 実行計画                 | 実行予定のコマンドを実行前に確認することができ、意図しない処理の抑制に繋がる。                                                                                                                                            |
| 事前条件                 | デプロイには実行可能となる「前提条件」を記述することができる。前提条件は実行前に確認され、条件を満たさなければ実行を中断する。中断時の状態を保管し、修正後に再度実行を可能とする。                                        |
| データ差分               | 宣言的にインフラやアプリを定義する場合にデータの差分を実行前に確認することができる。                                                                                                                                      |
| ステートの保管           | ステートをローカルPCやサーバ（AWS S3、Azure Blob Storageなど）に保管できる。                                                                                                                                              |
| 並列処理                 | 複数のビルドやデプロイを同時に実行することが効率的に処理を進めることができる。また、その際の処理間の依存関係を自動的に解決し効率的に処理される。                                                                          |
| コマンドラインとの親和性 | コードからはコマンドを簡単に呼び出すことが可能であり他のツールとの統合を容易に行えるよ。逆にDaickerをコマンドラインから呼び出した際には標準出力に結果をJSON形式で出力することで他のコマンドに結果を引き渡すことができる。 |
| 共同作業                 | 他の開発者や運用者と同時にインフラやアプリを変更しないように排他制御をしたり、誰がどのような操作を実行したかの実行履歴を残す。                                                                                            |
| 再利用性                 | 関数やデータ定義の集合はモジュールとして管理され、そのバージョン管理を提供する。また、外部のリポジトリからモジュールをインポートすることも可能である。                                                                    |  |
| 機密性                   | インフラへのアクセス情報などのクレデンシャルを安全に管理できる。このような情報はコードから除外し、外部から読み取ることができるようにする。                                                                                |

## 移植性

アプリケーションのビルドやインフラのデプロイには多くのコマンドを用いて、一連の処理を組み立てる必要がある。
通常このような処理を実施する前にはあらかじめ必要なコマンドを作業する環境にインストールしておく必要がある。

このようなコマンドはユーザ自身が管理する必要がある。
多くのコマンドを利用するようになるほどこのメンテナンスは煩雑となり、作業者間で環境を統一することも難しくなる。

Daickerではコンテナを使ってコマンドを呼び出す機能を提供する。
Docker Hubではよく開発用コマンドをインストールしたコンテナが[Developer Tools](https://hub.docker.com/search?categories=Developer+Tools)として配布されている。
このようなコンテナを使うことで直接コマンドをインストールすることなく、利用したいコマンドを実行することが可能である。
Daickerではこのようなコンテナを既に手元の環境にインストールしたかのように容易に呼び出せるようにする。

```daic
#alpine:latest $ echo "Hello World!"
```
